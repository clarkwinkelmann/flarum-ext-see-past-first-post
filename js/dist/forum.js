(()=>{var t={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},d:(o,n)=>{for(var e in n)t.o(n,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o),t.d(o,{components:()=>O});const n=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/app"];var r=t.n(e);const s=flarum.core.compat["forum/components/PostStream"];var i=t.n(s);const a=flarum.core.compat["forum/components/DiscussionListItem"];var c=t.n(a);const u=flarum.core.compat["forum/states/PostStreamState"];var p=t.n(u);function l(t,o){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},l(t,o)}const d=flarum.core.compat["common/Component"];var f=t.n(d);const P=flarum.core.compat["common/components/Button"];var y=t.n(P);const v=flarum.core.compat["forum/components/SignUpModal"];var h=t.n(v);const b=flarum.core.compat["forum/utils/DiscussionControls"];var S=t.n(b);const g=flarum.core.compat["common/utils/ItemList"];var k=t.n(g),w="clarkwinkelmann-see-past-first-post.forum.",_=function(t){var o,n;function e(){return t.apply(this,arguments)||this}n=t,(o=e).prototype=Object.create(n.prototype),o.prototype.constructor=o,l(o,n);var s=e.prototype;return s.view=function(){return r().session.user?m(".Post.CantSeePastFirstPost",r().translator.trans(w+"cant-see")):m(".Post.CantSeePastFirstPost",[m("p",r().translator.trans(w+"login-to-see")),m("p",this.links().toArray())])},s.links=function(){var t=new(k());return t.add("logIn",y().component({className:"Button Button--primary",onclick:function(){S().replyAction(!1,!1).catch((function(){}))}},r().translator.trans("core.forum.header.log_in_link"))),r().forum.attribute("allowSignUp")&&t.add("signUp",y().component({className:"Button Button--link",onclick:function(){return r().modal.show(h())}},r().translator.trans("core.forum.header.sign_up_link"))),t},e}(f()),O={CantSeePastFirstPost:_};r().initializers.add("clarkwinkelmann-see-past-first-post",(function(){(0,n.extend)(i().prototype,"view",(function(t){if(!this.discussion.attribute("canSeePastFirstPost")){var o=t.children.length;o>0&&this.stream.viewingEnd()&&(!r().session.user||this.discussion.canReply())&&o--,t.children.splice(o,0,_.component({key:"see-past-first-post"}))}})),(0,n.override)(p().prototype,"count",(function(t){return this.discussion.attribute("canSeePastFirstPost")||this.discussion.attribute("seePastFirstPostHiddenCount")?t():this.discussion.commentCount()})),(0,n.override)(p().prototype,"viewingEnd",(function(t){return!this.discussion.attribute("canSeePastFirstPost")||t()})),(0,n.extend)(c().prototype,"view",(function(t){this.attrs.discussion.attribute("seePastFirstPostHiddenCount")&&Array.isArray(t.children)&&t.children.forEach((function(t){if(t.attrs&&-1!==t.attrs.className.indexOf("DiscussionListItem-content")){var o=t.children.findIndex((function(t){return t.attrs&&"DiscussionListItem-count"===t.attrs.className}));-1!==o&&t.children.splice(o,1)}}))})),(0,n.override)(c().prototype,"showFirstPost",(function(t){return!!this.attrs.discussion.attribute("seePastFirstPostHiddenLastPost")||t()}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map